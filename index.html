<html ng-app="myApp">
    <head>
        <title>Crasponline Studio</title>
        <script src="js/jquery.js"></script>
        <script src="js/jquery.bridget.js"></script>
        <script src="js/get-style-property.js"></script>
        <script src="js/get-size.js"></script>
        <script src="js/EventEmitter.js"></script>
        <script src="js/eventie.js"></script>
        <script src="js/doc-ready.js"></script>
        <script src="js/matches-selector.js"></script>
        <script src="js/item.js"></script>
        <script src="js/outlayer.js"></script>
        <script src="js/imagesloaded.js"></script>
        <script src="js/plugins.min.js"></script>
        <script src='js/masonry.pkgd.min.js'></script>
        
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.8/angular.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.8/angular-resource.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.8/angular-route.min.js"></script>
        <script src="https://cdn.firebase.com/js/client/2.0.4/firebase.js"></script>
        <script src="https://cdn.firebase.com/libs/angularfire/0.9.1/angularfire.min.js"></script>
        <script src='js/angular-masonry.js'></script>
        <script src="js/ngLoading.js"></script>
        
        <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css" rel="stylesheet">
        <link rel="stylesheet" href="css/style.css">
        <link rel="stylesheet" href="css/login.css">
        <link rel="stylesheet" href="css/masonry.css">
        <link rel="stylesheet" href="css/ngLoading.css">
        <link href='http://fonts.googleapis.com/css?family=PT+Sans' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" type="text/css" href="https://www.firebase.com/resources/tutorial/css/example.css">

<!-- CACHE FILE: videos.html -->
<script type="text/ng-template" id="videos.html">
    <!-- Header -->
    <header class="cabecalho">
        <h1 class="title title-int"><span>Crasp</span><br><em>online</em></h1>
    </header>

    <!-- Categorias -->
    <div class="navbar categories">
        <nav>
            <ul class="cat bar">
                <li><a ng-click="filters.category = ''">TODOS</a></li>
                <li><a ng-click="filters.category = 'cat0'">Musica</a></li>
                <li><a ng-click="filters.category = 'cat1'">Cine</a></li>
                <li><a ng-click="filters.category = 'cat2'">Publicidad</a></li>
            </ul>

            <select>
                <option value="#todos" data-filter="*">Todos</option>
                <option value="#autoral" data-filter=".autoral">Autoral</option>
                <option value="#moda" data-filter=".moda">Moda</option>
                <option value="#publicidade" data-filter=".publicidade">Publicidade</option>
                <option value="#registro" data-filter=".registro">Registro</option>
            </select>
        </nav>
    </div>
    
    <div class="row projetos" masonry>
        <div class="masonry-brick item p" ng-repeat="brick in bricks | filter:filters">
            <a href="{{ brick.link }}" title>
                <img ng-src="{{ brick.src }}" alt="A masonry brick">
                <div class="info">
                    <div class="t">
                        <div class="tc">
                            <h3>{{ brick.title }}</h3>
                            <p>{{ brick.summary }}</p>
                        </div>
                    </div>
                </div>
            </a>
        </div>
    </div>
    
    <!-- CHAT MARKUP -->
    <div class='example-chat l-demo-container'>
        <header>Firebase Chat Demo</header>

        <div class='example-chat-toolbar'>
            <label for='nameInput'>Username:</label>
            <input ng-model='name' type='text' id='nameInput' placeholder='enter a username...'>
        </div>

        <ul id='example-messages' class='example-chat-messages'>
            <li ng-repeat='msg in messages'>
            <strong class='example-chat-username'>{{msg.from}}</strong>
                {{msg.body}}
            </li>
        </ul>

        <footer>
            <input ng-model='msg' ng-keydown="addMessage($event)" type='text' id='messageInput'  placeholder='Type a message...'>
        </footer>
    </div>
</script>

<!-- CACHE FILE: acerca.html -->
<script type="text/ng-template" id="acerca.html">
    <!-- Header -->
    <header class="cabecalho">
        <h1 class="title title-int"><span>Acerca</span><br><em>del Craspo</em></h1>
    </header>
</script>

<!-- CACHE FILE: donde.html -->
<script type="text/ng-template" id="donde.html">
    <!-- Header -->
    <header class="cabecalho">
        <h1 class="title title-int"><span>Donde</span><br><em>lo encontramos</em></h1>
    </header>
</script>

<!-- CACHE FILE: login.html -->
<script type="text/ng-template" id="login.html">
    <!-- Header -->
    <header class="cabecalho">
        <h1 class="title title-int"><span>Admin</span><br><em>Login</em></h1>
    </header>
    
    <form class="form-login" role="form" ng-submit="submit()" autocomplete="on">
        <h2 class="form-login-heading">Please login</h2>
        <input ng-model="email" name="email" type="email" class="form-control" placeholder="Email address" required autofocus/>
        <input ng-model="password" name="password" type="password" class="form-control" placeholder="Password" required/>
        <div class="checkbox">
            <label>
                <input ng-model="remember" type="checkbox" value="remember-me" class="checkbox-label" checked="True" /> Remember me
            </label>
        </div>
        <button class="btn btn-lg btn-primary btn-block" type="submit">Login</button>
    </form>

</script>

<!-- CACHE FILE: admin.html -->
<script type="text/ng-template" id="admin.html">
    <!-- Header -->
    <header class="cabecalho">
        <h1 class="title title-int"><span>Admin</span><br><em>Area</em></h1>
    </header>

    <div ng-show="user">
      <p>Hello, {{ user.password.email }}</p>
      <button ng-click="auth.$unauth()">Logout</button>
    </div>
    <div ng-hide="user">
        <p>Welcome, please <a href="#login">login</a></p>
    </div>
    
</script>

<!-- CACHE FILE: main.html -->
<script type="text/ng-template" id="main.html">
    <!-- Header -->
    <header class="cabecalho">
        <h1 class="title title-int"><span>Main</span><br><em>Area</em></h1>
    </header>

    <form ng-submit="add()">
        <div class="form-group">
            <label>First Name:</label>
            <input type="text" ng-model="firstname" class="form-control">
        </div>
        <div class="form-group">
            <label>Last Name:</label>
            <input type="text" ng-model="lastname" class="form-control">
        </div>
        <div class="form-group">
            <input type="submit" value="Save" class="btn btn-primary">
        </div>
    </form>
    
    <table class="table">
        <thead>
            <th>First Name</th>
            <th>Last Name</th>
            <th>&nbsp;</th>
            <th>&nbsp;</th>
        </thead>
        <tbody>
            <tr ng-repeat="(id, name) in person">
                <td>{{ name.firstname }}</td>
                <td>{{ name.lastname }}</td>
                <td>
                    <a href="#/edit/{{ name.$id }}">Edit</a>
                </t>
                <td>
                    <a href="#" ng-click="remove(id)">Remove</a>
                </td>
            </tr>
        </tbody>
    </table>
</script>

<!-- CACHE FILE: edit.html -->
<script type="text/ng-template" id="edit.html">
    <!-- Header -->
    <header class="cabecalho">
        <h1 class="title title-int"><span>Edit</span><br><em>post</em></h1>
    </header>

    <form ng-submit="edit()">
        <div class="form-group">
            <label>First Name:</label>
            <input type="text" ng-model="person.firstname" class="form-control">
        </div>
        <div class="form-group">
            <label>Last Name:</label>
            <input type="text" ng-model="person.lastname" class="form-control">
        </div>
        <div class="form-group">
            <input type="submit" value="Save" class="btn btn-primary">
        </div>
    </form>
    
</script>

    </head>
    
    <body class="container">
        
        <article class="margem">
        
        
            <!-- Header -->
            <header class="cabecalho">

                <!-- Logo -->
                <h1 class="logo"><a href="#login" title="Login">Crasponline Studio • Fotografia y Video</a></h1>

                <!-- Menu -->
                <ul class="menu bar">
                    <li><a href="#videos" title="Videos">Videos</a></li>
                    <li><a href="#acerca" title="Acerca">Acerca</a></li>
                    <li><a href="#donde" title="Donde">Donde</a></li>
                </ul>

                <!-- Social -->
                <ul class="social">
                    <li><a href="//fb.me/cras" title="Facebook" target="_blank">Facebook</a></li>
                    <li><a href="//vimeo.com/po" title="Vimeo" target="_blank">Vimeo</a></li>
                    <li><a href="//instagram.com/online" title="Instagram" target="_blank">Instagram</a></li>
                </ul>
            </header>
        
            <section>
            
                <!-- Laterais -->
                <ul class="lateral">
                    <li>VIDEOS</li>
                    <li>BIEN PIOLAS</li>
                </ul>

                <div ng-view></div>
                
            </section>
            
            <!-- Footer -->
            <footer class="bar">
                12 3456 7890&nbsp;&nbsp;&nbsp;/&nbsp;&nbsp;&nbsp;
                <a href="#">baws@crasponline.com.ar</a>&nbsp;&nbsp;&nbsp;/&nbsp;&nbsp;&nbsp;
                <a href="#admin">admin</a>
            </footer>
            
        </article>

<script>
myApp = angular.module('myApp', ['ngRoute','firebase', 'wu.masonry', 'ngLoading'])
.config(function(loadingProvider) {

})
.value('firebaseURL', 'https://incandescent-torch-8162.firebaseio.com/')
.service('fbRef', function(firebaseURL) {
  return new Firebase(firebaseURL)
})
.factory('Auth', ['$firebaseAuth', function($firebaseAuth) {
    var ref = new Firebase("https://incandescent-torch-8162.firebaseio.com/");
    return $firebaseAuth(ref);
}])
.factory('Person', function(firebaseURL, $firebase){
    return $firebase(new Firebase(firebaseURL)).$asArray();
})
.controller('Main', ['$scope', 'Person',
    function($scope, Person) {
    
        $scope.person = Person;
        console.log( $scope.person );
        
        $scope.add = function() {
            var save = Person.$add({
                firstname: $scope.firstname,
                lastname:  $scope.lastname
            });
            
            $scope.firstname = '';
            $scope.lastname = '';
            
            if (save){
                alert('saved succesfully');
            } else {
                alert('saved succesfully');
            }
        }
        
        $scope.remove = function (id) {
            Person.$remove(id);
        }
  
    }
])
.controller('Edit', function ($scope, $location, $routeParams, $firebase, firebaseURL) {
    var personURL = new Firebase(firebaseURL + $routeParams.id);
    $scope.person = $firebase(personURL).$asObject();

    $scope.edit = function() {
        $scope.person.$save();
        $location.path('/main');
    }
})
.controller('Admin', ['$scope', 'Auth',
    function($scope, Auth) {
        $scope.greetings = "hola Admin!";
        $scope.auth = Auth;
        $scope.user = $scope.auth.$getAuth();
        console.log("Auth Status:", $scope.user );
    }
])
.controller('Login', ['$scope', '$firebase',
    function($scope, $firebase) {
    
        $scope.submit = function () {
            var ref = new Firebase("https://incandescent-torch-8162.firebaseio.com/");

            ref.authWithPassword({
                email    : $scope.email,
                password : $scope.password
            }, function(error, authData) {
                if (error) {
                    console.log("Login Failed!", error);
                } else {
                    console.log("Authenticated successfully with payload:", authData);
                }
            });
        };
        
    }
])
.controller('Acerca', ['$scope',
    function($scope) {
        $scope.greetings = "hola acerca!";
    }
])
.controller('Donde', ['$scope',
    function($scope) {
        $scope.greetings = "hola donde!";
    }
])
.controller('Videos', ['$scope', '$firebase',
    function($scope, $firebase) {
        var ref = new Firebase("https://incandescent-torch-8162.firebaseio.com/");
        $scope.messages = $firebase(ref).$asArray();

        //ADD MESSAGE METHOD
        $scope.addMessage = function(e) {

            //LISTEN FOR RETURN KEY
            if (e.keyCode === 13 && $scope.msg) {
                //ALLOW CUSTOM OR ANONYMOUS USER NAMES
                var name = $scope.name || 'anonymous';
                $scope.messages.$add({from: name, body: $scope.msg});
                //RESET MESSAGE
                $scope.msg = "";
            }
        }

        $scope.load = function() {
            // do your $() stuff here
            var b = $(".cat"),
                c = b.find("a");
            c.click(function() {
                var a = $(this);
                if (a.hasClass("on")) return !1;
                var b = a.parents(".cat");
                b.find(".on").removeClass("on"), a.addClass("on")
            });
        };
        $scope.load();

        function genBrick() {
            var height = ~~(Math.random() * 500) + 100;
            var id = ~~(Math.random() * 10000);
            return {
                    src: 'http://lorempixel.com/g/280/' + height + '/?' + id,
                    link: '#link' + ~~(Math.random() * 100),
                    title: 'Title #' + ~~(Math.random() * 100),
                    summary: 'Summary #' + ~~(Math.random() * 100),
                    category: 'cat' + ~~(Math.random() * 3)
                };
        };

        $scope.bricks = [
            genBrick(),
            genBrick(),
            genBrick(),
            genBrick(),
            genBrick(),
            genBrick(),
            genBrick(),
            genBrick()
        ];

    }
])
.config(function($routeProvider) {
    $routeProvider
        .when('/', {
            controller:'Videos',
            templateUrl:'videos.html'
        })
        .when('/acerca', {
            controller:'Acerca',
            templateUrl:'acerca.html'
        })
        .when('/donde', {
            controller:'Donde',
            templateUrl:'donde.html'
        })
        .when('/admin', {
            controller:'Admin',
            templateUrl:'admin.html'
        })
        .when('/login', {
            controller:'Login',
            templateUrl:'login.html'
        })
        .when('/main', {
            controller:'Main',
            templateUrl:'main.html'
        })
        .when('/edit/:id', {
            controller: 'Edit',
            templateUrl: 'edit.html'
        })
        .otherwise({
            redirectTo:'/'
        });
})
;
</script>
</body>


</html>
